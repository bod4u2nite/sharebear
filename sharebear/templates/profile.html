{% extends 'base.html' %}
{% load bootstrap3 %}
{% load humanize %}

{% block content %}

<div class='row'>
	<div class='col-xs-12'>
		<div id='profile-pic-container' style='padding-top: 20px'>
			<img id='profile-pic' src="{{ profile_user.profile.profile_image_url }}" style='float: left;' height="100" width="100"/>
			<h2> {{ profile_user.username }}</h2>
			<p>{{ profile_user.profile.aboutme }}</p>
			<p>{{ profile_user.profile.location }}</p>
		</div>		
		<div id='profile-button'>	
			{% if profile_user == user %}
			<form action ='/edit/{{ profile_user.username }}'>
				<input id='edit-button' type='submit' class='btn btn-default' value='Edit Profile'>
			</form>
			{% endif %}
			
			{% if profile_user != user and user.is_authenticated %}
			
				{% if following %}

			    <form action="{% url 'user_follow' profile_user.profile.id %}" method="post" class='follow-form'>{% csrf_token %}
			        <button type="submit" id="fbutton" class="btn follow-button">Unfollow</button>
			    </form>
			    
			    {% else %}

	            <form action="{% url 'user_follow' profile_user.profile.id %}" method="post" class='follow-form'>{% csrf_token %}
	                <button type="submit" id="fbutton" class="btn btn-default follow-button">Follow</button>
	            </form>

			    {% endif %}

			{% endif %}
		</div>
	</div>
</div>

<div class='row '>
	<div class='col-xs-4'>
		<div class='user-share-stats'>
		    <span class="glyphicon glyphicon-user medium-stats-glyphicon" aria-hidden="true"></span>
			<p> {{ profile_user.profile.get_reach }}</p>
		</div>
	</div>
	<div class='col-xs-4'>
		<div class='user-share-stats'>
		    <span class="glyphicon glyphicon-play medium-stats-glyphicon" aria-hidden="true"></span>
				<p> {{ profile_user.profile.get_plays }}</p>
		</div>
	</div>
	<div class='col-xs-4'>
		<div class='user-share-stats'>
		    <span class="glyphicon glyphicon-heart medium-stats-glyphicon" aria-hidden="true"></span>
				<p> {{ profile_user.profile.get_likes }}</p>
		</div>
	</div>
</div>

<div class='row profile-pill-row'>
	<ul class='nav nav-pills'>
		<li role='presentation'><a href='/users/{{ profile_user.username }}'>Posted Tracks</a></li>
		<li role='presentation'><a href='/likes/{{ profile_user.username }}'>Likes</a></li>
		<li role='presentation'><a href='/comments/{{ profile_user.username }}'>Comments</a></li>
	</ul>
</div>

{% for message, view_count, play_count, prop_count in parameter_list %}
<div class='row share-view-message'>
	<div class='col-xs-12'>
		<div class='row'>
			<div class='col-xs-10'>
				<div id='share-body'>
					{{ message.body|truncatechars:140 }}
				</div>	
			</div>
			<div class='col-xs-2'>
				<div id='feed-timestamp'>
					<time>{{ message.creation_time|date:_("DATETIME_FORMAT") }}</time> 
				</div>
			</div>
		</div>
		<div class='row' style='padding-top: 10px;'>
			<div class='col-xs-10'>
		    	<a href="/stats/{{ message.id }}">View Full Message and Comments</a>
		    </div>
		    <div class='col-xs-2' style='text-align: right;'>
		    	<div class='row'>
		    	<div class='col-xs-4'>
			    <span class="glyphicon glyphicon-user small-stats-glyphicon" aria-hidden="true"></span>
			    {{ view_count }}
			    </div>
			    <div class='col-xs-4'>
			    <span class="glyphicon glyphicon-play small-stats-glyphicon" aria-hidden="true"></span>
			    {{ play_count }}
			    </div>
			    <div class='col-xs-4'>
		    	<span class="glyphicon glyphicon-heart small-stats-glyphicon" aria-hidden="true"></span>
			    {{ prop_count }}
			    </div>
			    </div>
		    </div>
		</div>
	</div>
</div>
  

{% endfor %}


{% endblock %}