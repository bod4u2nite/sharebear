{% extends 'base.html' %}
{% load bootstrap3 %}
{% load humanize %}

{% block content %}

<div class='row'>
	<div id = 'top-container' class='col-md-8 col-md-offset-2'>
		<div class='row'>
				<div id='profile-pic' style='padding-top: 20px'>
				<img src="{{ profile_user.profile.profile_image_url }}" height="100" width="100"/>
				</div>
				<h2> {{ profile_user.first_name }} {{ profile_user.last_name }}</h2>
		</div>
		<div class='row'>
			<p>{{ profile_user.profile.location }}</p>
		</div>
		<div class='row'>
			<p>{{ profile_user.profile.aboutme }}</p>
		</div>

		<div class='row'>
			<h2>Liked messages</h2>
		</div>

		{% for message in profile_user.received_messages.all %}
		{% if message.is_liked %}
		
		<div class="row subject">
	        <div class="col-md-12">
	        <h2>{{ message.subject }}</h2>
	        </div>
	    </div>
	    <div class="row sender-info">
	        <div class="col-md-8">
	            <a href="/users/{{ message.sender }}"><img src="{{ message.sender.profile.profile_image_url }}" width="50" height="50" /></a>
	            <a href="/users/{{ message.sender }}">{{ message.sender }}</a>
	        </div>
	        <div class="col-md-4">
	            <p><em>Sent at {{ message.sent_at|date:_("DATETIME_FORMAT")}}</em></p>
	        </div>
	    </div>
	    <div class='row message-body'>
	        <div class='col-md-12'>
	            <p>{{ message.body|urlize }}</p>
	        </div>
	    </div>
	    {% endif %}
	    {% endfor %}

		{% if profile_user == user %}
			<div class='row'>
				<div id='profile-edit'>
					<h3> Edit Profile </h3>
				</div>
					<form enctype='multipart/form-data' action='/edit/' method='post'>{% csrf_token %}
						{% bootstrap_form edit_form %}
						<input type='hidden' value='{{ next_url }}' name='next_url'>
						<input type='submit' class='btn btn-default' value='Update!'>
					</form>
			</div>
		{% endif %}

	</div>
</div>


{% endblock %}
